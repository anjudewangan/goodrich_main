"use strict";!function(b){b.fn.flipster=function(e){var o,p,t,y,C,x="string"==typeof e;return x?(o=e,p=Array.prototype.slice.call(arguments,1)):(t={itemContainer:"ul",itemSelector:"li",style:"coverflow",start:"center",enableKeyboard:!0,enableMousewheel:!0,enableTouch:!0,onItemSwitch:b.noop,disableRotation:!1,enableNav:!1,navPosition:"before",enableNavButtons:!1,prevText:"Previous",nextText:"Next"},y=b.extend({},t,e),C=b(window)),this.each(function(){function t(){a=0}function c(){var e;d.height((e=0,h.each(function(){b(this).height()>e&&(e=b(this).height())}),e)),r.css("height","auto"),"carousel"===y.style&&d.width(h.width())}function i(){var e,t,i,l,n,a=b(h[m]).addClass("flip-current");if(h.removeClass("flip-prev flip-next flip-current flip-past flip-future no-transition"),"carousel"===y.style){h.addClass("flip-hidden");var s=b(h[m+1]),r=b(h[m+2]),f=b(h[m-1]),o=b(h[m-2]);0===m?o=(f=h.last()).prev():1===m?o=h.last():m===h.length-2?r=h.first():m===h.length-1&&(s=h.first(),r=b(h[1])),r.removeClass("flip-hidden").addClass("flip-future"),o.removeClass("flip-hidden").addClass("flip-past"),s.removeClass("flip-hidden").addClass("flip-next"),f.removeClass("flip-hidden").addClass("flip-prev")}else{var p=a.outerWidth()/2,o=d.width(),s=a.outerWidth(),f=h.index(a)*s/2+p/2;for(h.removeClass("flip-hidden"),e=0;e<h.length;e++)i=(t=b(h[e])).outerWidth(),e<m?t.addClass("flip-past").css({"z-index":e,left:e*i/2+50+"px"}):m<e&&t.addClass("flip-future").css({"z-index":h.length-e,left:e*i/2-50+p+"px"});if(a.css({"z-index":h.length+1,left:f+"px"}),o=-1*(f+s/2-o/2)+"px",g){for(l=b(".flip-past"),n=b(".flip-future"),b(".flip-current").css("zoom","1.0"),e=0;e<l.length;e++)b(l[e]).css("zoom",100-5*(l.length-e)+"%");for(e=0;e<n.length;e++)b(n[e]).css("zoom",100-5*(e+1)+"%");d.animate({left:o},333)}else d.css("left",o)}a.addClass("flip-current").removeClass("flip-prev flip-next flip-past flip-future flip-hidden"),c(),y.enableNav&&1<h.length&&(a=b(h[m]),u.find(".flip-nav-current").removeClass("flip-nav-current"),v.filter("[href='#"+a.attr("id")+"']").addClass("flip-nav-current"),v.filter("[data-flip-category='"+a.data("flip-category")+"']").parent().addClass("flip-nav-current")),y.onItemSwitch.call(this)}function s(e){1<h.length&&("left"===e?0<m?m--:m=h.length-1:"right"===e?m<h.length-1?m++:m=0:m="number"==typeof e?e:h.index(e),i())}var r=b(this);if(x)return(f=r.data("methods"))[o].apply(this,p);var d,h,u,v,l,g,e,m=0,n=0,a=0,f={jump:s};r.data("methods",f),r.hasClass("flipster-active")||(r.addClass("flipster flipster-active flipster-"+y.style).css("visibility","hidden"),y.disableRotation&&r.addClass("no-rotate"),d=r.find(y.itemContainer).addClass("flip-items"),h=d.find(y.itemSelector).addClass("flip-item flip-hidden").wrapInner("<div class='flip-content' />"),(e=document.createElement("b")).innerHTML="\x3c!--[if IE 9]><i></i><![endif]--\x3e",1===e.getElementsByTagName("i").length&&(g=!0,d.addClass("compatibility")),function(){var e,t,i;if(y.enableNav&&1<h.length){var l=[],n=[],a=[];for(t in h.each(function(){var e=b(this).data("flip-category"),t=b(this).attr("id"),i=b(this).attr("title");void 0!==e&&b.inArray(e,l)<0&&(l.push(e),a[e]='<li class="flip-nav-category"><a href="#" class="flip-nav-category-link" data-flip-category="'+e+'">'+e+'</a>\n<ul class="flip-nav-items">\n'),b.inArray(t,n)<0&&(n.push(t),i='<a href="#'+t+'" class="flip-nav-item-link">'+i+"</a></li>\n",void 0!==e?a[e]=a[e]+'<li class="flip-nav-item">'+i:a[t]='<li class="flip-nav-item no-category">'+i)}),e='<ul class="flipster-nav">\n',l)a[l[t]]=a[l[t]]+"</ul>\n</li>\n";for(i in a)e+=a[i];e+="</ul>",u="after"!=y.navPosition.toLowerCase()?b(e).prependTo(r):b(e).appendTo(r),v=u.find("a").on("click",function(e){var t=b(this).hasClass("flip-nav-category-link")?h.filter("[data-flip-category='"+b(this).data("flip-category")+"']"):b(this.hash);t.length&&(s(t),e.preventDefault())})}}(),y.enableNavButtons&&1<h.length&&(r.find(".flipto-prev, .flipto-next").remove(),r.append("<a href='#' class='flipto-prev'>"+y.prevText+"</a> <a href='#' class='flipto-next'>"+y.nextText+"</a>"),r.children(".flipto-prev").on("click",function(e){s("left"),e.preventDefault()}),r.children(".flipto-next").on("click",function(e){s("right"),e.preventDefault()})),y.start&&1<h.length&&(m="center"===y.start?!h.length%2?h.length/2+1:Math.floor(h.length/2):y.start),c(),r.hide().css("visibility","visible").fadeIn(400,function(){i()}),C.on("resize.flipster",function(){c(),i()}),h.on("click",function(e){b(this).hasClass("flip-current")||e.preventDefault(),s(h.index(this))}),y.enableKeyboard&&1<h.length&&(C.on("keydown.flipster",function(e){var t;++a%7!=0&&1!==a||(37===(t=e.which)?(e.preventDefault(),s("left")):39===t&&(e.preventDefault(),s("right")))}),C.on("keyup.flipster",function(){a=0})),y.enableMousewheel&&1<h.length&&r.on("mousewheel.flipster",function(e){l=window.setTimeout(t,500),++a%4!=0&&1!==a||(window.clearTimeout(l),s(0<e.originalEvent.wheelDelta/120?"left":"right"),e.preventDefault())}),y.enableTouch&&1<h.length&&(r.on("touchstart.flipster",function(e){n=e.originalEvent.targetTouches[0].screenX}),r.on("touchmove.flipster",function(e){e.preventDefault();var t=e.originalEvent.targetTouches[0].screenX,e=t-n;e>h[0].clientWidth/1.75?(s("left"),n=t):e<h[0].clientWidth/1.75*-1&&(s("right"),n=t)}),r.on("touchend.flipster",function(){n=0})))})}}(jQuery);